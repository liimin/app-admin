generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model device {
  id          Int          @id @default(autoincrement())
  create_time DateTime     @db.DateTime(0)
  sn          String       @unique @db.VarChar(20)
  // device_info device_info?
  // log_config  log_config?
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model device_info {
  id                   Int         @id @default(autoincrement())
  device_sn            String      @unique @db.VarChar(20)
  user                 String?     @db.VarChar(20)
  status               Int?        @db.TinyInt
  last_log_upload_time DateTime?   @db.DateTime(0)
  last_log_remove_time DateTime?   @db.Date
  // device               device?     @relation(fields: [device_sn], references: [sn])
  // log_config            log_config?
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model log_config {
  id             Int              @id @default(autoincrement())
  device_sn      String           @unique @db.VarChar(50)
  log_saved_days Int?             @default(7) @db.TinyInt
  log_user_field log_user_field[]
  // device         device           @relation(fields: [device_sn], references: [sn])
  // device_info    device_info      @relation(fields: [device_sn], references: [device_sn], onDelete: NoAction, onUpdate: NoAction, map: "FK_303042b366f2ba3d54f4ddaf6ab")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model log_user_field {
  id         Int         @id @default(autoincrement())
  name       String      @db.VarChar(20)
  config_id  Int?
  log_config log_config? @relation(fields: [config_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_303042b366f2ba3d54f4ddaf6ac")

  @@index([config_id], map: "FK_log_user_field_log_config")
}
